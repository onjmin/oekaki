<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@onjmin/oekaki</title><meta name="description" content="Documentation for @onjmin/oekaki"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@onjmin/oekaki</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@onjmin/oekaki</h1></div><div class="tsd-panel tsd-typography"><h1 id="oekaki" class="tsd-anchor-link">oekaki<a href="#oekaki" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>ãƒ¬ã‚¤ãƒ¤ãƒ¼æ¦‚å¿µãŒã‚ã‚‹ãŠçµµæããƒ‘ãƒƒã‚±ãƒ¼ã‚¸</p>
<h2 id="ç‰¹å¾´" class="tsd-anchor-link">ç‰¹å¾´<a href="#ç‰¹å¾´" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ãƒ•ãƒ«ã‚¹ã‚¯ãƒ©ãƒƒãƒ
<ul>
<li>ãƒ–ãƒ©ã‚¦ã‚¶çµ„ã¿è¾¼ã¿ã®APIã®ã¿ã‚’ä½¿ç”¨</li>
<li>ãã£ã‹ã‘ã¯Svelteã‚¢ãƒ—ãƒªã‹ã‚‰èª­ã¿è¾¼ã‚€ç”¨é€”ã ã£ãŸãŒã€Svelteã«ã‚‚éä¾å­˜ãªè¨­è¨ˆ</li>
</ul>
</li>
<li>TypeScriptè£½
<ul>
<li>vscodeä¸Šã§å‹ã®å®‰å…¨æ€§ãŒå®ˆã‚‰ã‚Œã‚‹</li>
</ul>
</li>
<li><strong>ãŠã‚“Jæ°‘ãŒä½œã£ã¦ã„ã‚‹</strong><br>
è³ªå•ã‚„ç›¸è«‡ã¯ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ã§: <a href="https://unj.netlify.app">è³ªå•ãƒ•ã‚©ãƒ¼ãƒ©ãƒ </a></li>
</ul>
<h2 id="ãƒªãƒ³ã‚¯é›†" class="tsd-anchor-link">ãƒªãƒ³ã‚¯é›†<a href="#ãƒªãƒ³ã‚¯é›†" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ğŸ‘€ <a href="https://onjmin.github.io/oekaki/demo">DEMO</a></li>
<li>ğŸ›« <a href="https://onjmin.github.io/oekaki">ä»•æ§˜æ›¸</a></li>
<li>ğŸŒŸ <a href="https://github.com/onjmin/oekaki">GitHubãƒªãƒã‚¸ãƒˆãƒª</a></li>
<li>ğŸŒ´ <a href="https://www.npmjs.com/package/@onjmin/oekaki">npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a></li>
</ul>
<h2 id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="tsd-anchor-link">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">@onjmin/oekaki</span>
</code><button type="button">Copy</button></pre>

<h2 id="ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" class="tsd-anchor-link">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰<a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="nodejsã¸ã®é™çš„ãªimport" class="tsd-anchor-link">Node.jsã¸ã®é™çš„ãªimport<a href="#nodejsã¸ã®é™çš„ãªimport" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-5">oekaki</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@onjmin/oekaki&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ" class="tsd-anchor-link">ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ<a href="#ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">oekaki</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">import</span><span class="hl-1">(</span><span class="hl-2">&quot;https://cdn.jsdelivr.net/npm/@onjmin/oekaki/dist/index.min.mjs&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="ä½¿ç”¨ä¾‹" class="tsd-anchor-link">ä½¿ç”¨ä¾‹<a href="#ä½¿ç”¨ä¾‹" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><a href="https://github.com/onjmin/unj/blob/main/src/client/parts/OekakiPart.svelte"><code>TypeScript,Svelte</code> ã®ä½¿ç”¨ä¾‹</a></li>
<li><a href="https://github.com/rpgja/rpgen-walk/blob/main/src/routes/%2Bpage.svelte"><code>TypeScript,SvelteKit</code> ã®ä½¿ç”¨ä¾‹</a></li>
<li><a href="https://greasyfork.org/ja/scripts/549955/code">ç´ ã® <code>JavaScript</code> ã®ä½¿ç”¨ä¾‹</a></li>
</ul>
<hr>
<ul>
<li>Chrome DevToolsä¸Šã®ã‚³ãƒ”ãƒšã§è©¦ã›ã‚‹ã§</li>
</ul>
<pre><code class="js"><span class="hl-7">// ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">oekaki</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">import</span><span class="hl-1">(</span><span class="hl-2">&quot;https://cdn.jsdelivr.net/npm/@onjmin/oekaki/dist/index.mjs&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// canvasã®å…¥ã‚Œç‰©ã‚’ç”¨æ„ã™ã‚‹ã€‚ã‚»ãƒ¬ã‚¯ã‚¿ã§å–ã£ã¦ãã‚‹æ–¹æ³•ã‚‚å¯</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">wrapper</span><span class="hl-1"> = </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">createElement</span><span class="hl-1">(</span><span class="hl-2">&quot;div&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-5">body</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-5">wrapper</span><span class="hl-1">);</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-7">// å¹…ã¨é«˜ã•ã¯è‡ªç”±ã«æŒ‡å®šå¯èƒ½ã€‚å¾Œã‹ã‚‰å¤‰æ›´ä¸å¯</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">width</span><span class="hl-1"> = </span><span class="hl-8">640</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">height</span><span class="hl-1"> = </span><span class="hl-8">360</span><span class="hl-1">;</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-5">wrapper</span><span class="hl-1">, </span><span class="hl-5">width</span><span class="hl-1">, </span><span class="hl-5">height</span><span class="hl-1">); </span><span class="hl-7">// åˆæœŸåŒ–ã€‚ã“ã‚Œä»¥å¤–ã®å¼•æ•°ãªã—</span><br/><br/><span class="hl-7">// çœç•¥å¯ã€‚ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æœ€å‰é¢ã¨æœ€èƒŒé¢ã«CSSã‚’å½“ã¦ãŸã„äººå‘ã‘ã€‚GIMPã®é€éèƒŒæ™¯ã‚„ãƒˆãƒ¬ã‚¹å°ãªã©</span><br/><span class="hl-5">upperLayer</span><span class="hl-1"> = </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">upperLayer</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1">;</span><br/><span class="hl-5">lowerLayer</span><span class="hl-1"> = </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1">;</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">upperLayer</span><span class="hl-1">) </span><span class="hl-5">upperLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">classList</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-2">&quot;upper-canvas&quot;</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">lowerLayer</span><span class="hl-1">) </span><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">classList</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-2">&quot;lower-canvas&quot;</span><span class="hl-1">);</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-7">// é©å½“ãªèƒŒæ™¯</span><br/><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">style</span><span class="hl-1">.</span><span class="hl-5">backgroundColor</span><span class="hl-1"> = </span><span class="hl-2">&#39;#fff&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">style</span><span class="hl-1">.</span><span class="hl-5">backgroundImage</span><span class="hl-1"> = </span><span class="hl-2">`</span><br/><span class="hl-2">  linear-gradient(45deg, #eee 25%, transparent 25%),</span><br/><span class="hl-2">  linear-gradient(-45deg, #eee 25%, transparent 25%),</span><br/><span class="hl-2">  linear-gradient(45deg, transparent 75%, #eee 75%),</span><br/><span class="hl-2">  linear-gradient(-45deg, transparent 75%, #eee 75%)</span><br/><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">style</span><span class="hl-1">.</span><span class="hl-5">backgroundSize</span><span class="hl-1"> = </span><span class="hl-2">&#39;16px 16px&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">lowerLayer</span><span class="hl-1">.</span><span class="hl-5">canvas</span><span class="hl-1">.</span><span class="hl-5">style</span><span class="hl-1">.</span><span class="hl-5">backgroundPosition</span><span class="hl-1"> = </span><span class="hl-2">`</span><br/><span class="hl-2">  0 0,</span><br/><span class="hl-2">  0 8px,</span><br/><span class="hl-2">  8px -8px,</span><br/><span class="hl-2">  -8px 0px</span><br/><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-5">mode</span><span class="hl-1"> = </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ç™»éŒ²</span><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-5">prevX</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-5">prevY</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">onDraw</span><span class="hl-1">((</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, </span><span class="hl-5">buttons</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> { </span><span class="hl-7">// æãå§‹ã‚ãƒ»æã„ã¦ã‚‹é€”ä¸­ã«ç™ºç«</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">prevX</span><span class="hl-1"> === </span><span class="hl-4">null</span><span class="hl-1">) </span><span class="hl-5">prevX</span><span class="hl-1"> = </span><span class="hl-5">x</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">prevY</span><span class="hl-1"> === </span><span class="hl-4">null</span><span class="hl-1">) </span><span class="hl-5">prevY</span><span class="hl-1"> = </span><span class="hl-5">y</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-5">locked</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">mode</span><span class="hl-1"> === </span><span class="hl-8">1</span><span class="hl-1">) { </span><span class="hl-7">// æ»‘ã‚‰ã‹ãªç·šç”»</span><br/><span class="hl-1">      </span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">drawLine</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, </span><span class="hl-5">prevX</span><span class="hl-1">, </span><span class="hl-5">prevY</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">lerps</span><span class="hl-1"> = </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">lerp</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, </span><span class="hl-5">prevX</span><span class="hl-1">, </span><span class="hl-5">prevY</span><span class="hl-1">); </span><span class="hl-7">// ç·šå½¢è£œå®Œ</span><br/><span class="hl-1">      </span><span class="hl-3">switch</span><span class="hl-1"> (</span><span class="hl-5">mode</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">case</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">: </span><span class="hl-7">// ã‚¢ãƒ³ãƒã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒãªã„ç·šç”»</span><br/><span class="hl-1">          </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-6">x</span><span class="hl-1">, </span><span class="hl-6">y</span><span class="hl-1">] </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">lerps</span><span class="hl-1">) </span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">draw</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-3">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-3">case</span><span class="hl-1"> </span><span class="hl-8">3</span><span class="hl-1">: </span><span class="hl-7">// æ¶ˆã—ã‚´ãƒ </span><br/><span class="hl-1">          </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-6">x</span><span class="hl-1">, </span><span class="hl-6">y</span><span class="hl-1">] </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">lerps</span><span class="hl-1">) </span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">erase</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-3">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-3">case</span><span class="hl-1"> </span><span class="hl-8">4</span><span class="hl-1">: </span><span class="hl-7">// ãƒ‰ãƒƒãƒˆçµµç”¨ã®ãƒšãƒ³</span><br/><span class="hl-1">          </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-6">x</span><span class="hl-1">, </span><span class="hl-6">y</span><span class="hl-1">] </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">lerps</span><span class="hl-1">) </span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">drawByDot</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-3">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-3">case</span><span class="hl-1"> </span><span class="hl-8">5</span><span class="hl-1">: </span><span class="hl-7">// ãƒ‰ãƒƒãƒˆçµµç”¨ã®æ¶ˆã—ã‚´ãƒ </span><br/><span class="hl-1">          </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-6">x</span><span class="hl-1">, </span><span class="hl-6">y</span><span class="hl-1">] </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">lerps</span><span class="hl-1">) </span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">eraseByDot</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-3">break</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">prevX</span><span class="hl-1"> = </span><span class="hl-5">x</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">prevY</span><span class="hl-1"> = </span><span class="hl-5">y</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">fin</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-0">modified</span><span class="hl-1">()) { </span><span class="hl-7">// æç”»å·®åˆ†æ¤œå‡º</span><br/><span class="hl-1">    </span><span class="hl-5">activeLayer</span><span class="hl-1">.</span><span class="hl-0">trace</span><span class="hl-1">(); </span><span class="hl-7">// undo/redoå‡ºæ¥ã‚‹ã‚ˆã†ã«ç™»éŒ²</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">onDrawn</span><span class="hl-1">((</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, </span><span class="hl-5">buttons</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> { </span><span class="hl-7">// æãçµ‚ã‚ã‚Šã«ç™ºç«</span><br/><span class="hl-1">  </span><span class="hl-5">prevX</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">prevY</span><span class="hl-1"> = </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">activeLayer</span><span class="hl-1">?.</span><span class="hl-5">locked</span><span class="hl-1">) </span><span class="hl-3">return</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">mode</span><span class="hl-1"> === </span><span class="hl-8">6</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">floodFill</span><span class="hl-1">(</span><span class="hl-5">activeLayer</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">, </span><span class="hl-5">width</span><span class="hl-1">, </span><span class="hl-5">height</span><span class="hl-1">, </span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, [ </span><span class="hl-7">// ç·‘è‰²ã§ãƒã‚±ãƒ„å¡—ã‚Š</span><br/><span class="hl-1">      </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">    ]);</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-5">activeLayer</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1"> = </span><span class="hl-5">data</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">fin</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">onClick</span><span class="hl-1">((</span><span class="hl-5">x</span><span class="hl-1">, </span><span class="hl-5">y</span><span class="hl-1">, </span><span class="hl-5">buttons</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {}); </span><span class="hl-7">// å³ã‚¯ãƒªãƒƒã‚¯ç¦æ­¢ã™ã‚‹ãŸã‚ã«å–ã‚Šåˆãˆãšè¦ã‚‹ã€‚ã¾ãŸã¯PCé™å®šã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’ç™»éŒ²ã™ã‚‹ç”¨</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-7">// 1æšã®ç”»åƒã«ã—ã¦ä¿å­˜ï¼ˆå¾Œã§ã“ã®é–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ã­ï¼‰</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">save</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">dataURL</span><span class="hl-1"> = </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">render</span><span class="hl-1">().</span><span class="hl-0">toDataURL</span><span class="hl-1">(</span><span class="hl-2">&quot;image/png&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">link</span><span class="hl-1"> = </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">createElement</span><span class="hl-1">(</span><span class="hl-2">&quot;a&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">link</span><span class="hl-1">.</span><span class="hl-5">href</span><span class="hl-1"> = </span><span class="hl-5">dataURL</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">link</span><span class="hl-1">.</span><span class="hl-5">download</span><span class="hl-1"> = </span><span class="hl-2">&quot;drawing.png&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">link</span><span class="hl-1">.</span><span class="hl-0">click</span><span class="hl-1">();</span><br/><span class="hl-1">};</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-7">// ãƒ‰ãƒƒãƒˆãƒ–ãƒ©ã‚·ã®è¨­å®š</span><br/><span class="hl-7">// heightåŸºæº–ã§æœ€å¤§64ãƒã‚¹ã«ãªã‚‹ã‚ˆã†ã«åˆ†å‰²ã—ã€ãƒ‰ãƒƒãƒˆãƒšãƒ³ã‚’3x3ãƒã‚¹ã®å¤ªã•ã«è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">setDotSize</span><span class="hl-1">(</span><span class="hl-8">3</span><span class="hl-1">, </span><span class="hl-8">64</span><span class="hl-1">, </span><span class="hl-5">height</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">getDotSize</span><span class="hl-1">()); </span><span class="hl-7">// 3x3ã®å®Ÿéš›ã®pxã‚’å–å¾—</span><br/><br/><span class="hl-7">// ãƒšãƒ³ã®è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">color</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-2">&quot;#FF0000&quot;</span><span class="hl-1">; </span><span class="hl-7">// ãƒšãƒ³ã®è‰²ã‚’èµ¤è‰²ã«å¤‰æ›´</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">color</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-2">&quot;#FF0000&quot;</span><span class="hl-1">;     </span><span class="hl-7">// ãƒšãƒ³ã®è‰²ã‚’èµ¤ã«è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">penSize</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-8">4</span><span class="hl-1">;           </span><span class="hl-7">// é€šå¸¸ãƒšãƒ³ã®ã‚µã‚¤ã‚ºã‚’4pxã«è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">brushSize</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-8">10</span><span class="hl-1">;        </span><span class="hl-7">// ãƒ–ãƒ©ã‚·ã‚µã‚¤ã‚ºã‚’10pxã«è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-5">eraserSize</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-8">12</span><span class="hl-1">;       </span><span class="hl-7">// æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºã‚’12pxã«è¨­å®š</span><br/><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">setDotSize</span><span class="hl-1">(</span><span class="hl-8">8</span><span class="hl-1">);       </span><span class="hl-7">// ãƒ‰ãƒƒãƒˆãƒšãƒ³ã‚’8x8ã®å¤ªã•ã«è¨­å®š</span><br/><span class="hl-7">// ã“ã“ã¾ã§</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">layer1</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">LayeredCanvas</span><span class="hl-1">(</span><span class="hl-2">&quot;ãƒ¬ã‚¤ãƒ¤ãƒ¼ #1&quot;</span><span class="hl-1">); </span><span class="hl-7">// 1æšç›®ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–°è¦ä½œæˆ</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">layer2</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">LayeredCanvas</span><span class="hl-1">(</span><span class="hl-2">&quot;ãƒ¬ã‚¤ãƒ¤ãƒ¼ #2&quot;</span><span class="hl-1">); </span><span class="hl-7">// 2æšç›®ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–°è¦ä½œæˆ</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">layer3</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">LayeredCanvas</span><span class="hl-1">(</span><span class="hl-2">&quot;ãƒ¬ã‚¤ãƒ¤ãƒ¼ #3&quot;</span><span class="hl-1">); </span><span class="hl-7">// 3æšç›®ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–°è¦ä½œæˆ</span><br/><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">oekaki</span><span class="hl-1">.</span><span class="hl-0">getLayers</span><span class="hl-1">()) </span><span class="hl-7">// ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’å–å¾—</span><br/><br/><span class="hl-7">// activeLayer = layer1; // ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã«åˆ‡ã‚Šæ›¿ãˆ</span><br/><span class="hl-5">activeLayer</span><span class="hl-1"> = </span><span class="hl-5">layer2</span><span class="hl-1">; </span><span class="hl-7">// ãƒ¬ã‚¤ãƒ¤ãƒ¼2ã«åˆ‡ã‚Šæ›¿ãˆ</span><br/><span class="hl-7">// activeLayer = layer3; // ãƒ¬ã‚¤ãƒ¤ãƒ¼3ã«åˆ‡ã‚Šæ›¿ãˆ</span><br/><br/><span class="hl-7">// activeLayer = oekaki.getLayers()[0]; // ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã«åˆ‡ã‚Šæ›¿ãˆ</span><br/><span class="hl-7">// activeLayer = oekaki.getLayers()[1]; // ãƒ¬ã‚¤ãƒ¤ãƒ¼2ã«åˆ‡ã‚Šæ›¿ãˆ</span><br/><span class="hl-7">// activeLayer = oekaki.getLayers()[2]; // ãƒ¬ã‚¤ãƒ¤ãƒ¼3ã«åˆ‡ã‚Šæ›¿ãˆ</span>
</code><button type="button">Copy</button></pre>

<h2 id="ãƒ©ã‚¤ã‚»ãƒ³ã‚¹--license" class="tsd-anchor-link">ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ / License<a href="#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹--license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>AGPL-3.0</strong><br>
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã«ã¯ AGPL-3.0 ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚è©³ç´°ã¯ <a href="media/LICENSE"><code>LICENSE</code></a> ã‚’ã”è¦§ãã ã•ã„ã€‚</li>
</ul>
<h2 id="é–‹ç™ºè€…--author" class="tsd-anchor-link">é–‹ç™ºè€… / Author<a href="#é–‹ç™ºè€…--author" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://github.com/onjmin">ãŠã‚“Jæ°‘</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#oekaki"><span>oekaki</span></a><ul><li><a href="#ç‰¹å¾´"><span>ç‰¹å¾´</span></a></li><li><a href="#ãƒªãƒ³ã‚¯é›†"><span>ãƒªãƒ³ã‚¯é›†</span></a></li><li><a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><span>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></a></li><li><a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰"><span>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</span></a></li><li><ul><li><a href="#nodejsã¸ã®é™çš„ãªimport"><span>Node.jsã¸ã®é™çš„ãªimport</span></a></li><li><a href="#ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"><span>ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span></a></li><li><a href="#ä½¿ç”¨ä¾‹"><span>ä½¿ç”¨ä¾‹</span></a></li></ul></li><li><a href="#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹--license"><span>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ / <wbr/>License</span></a></li><li><a href="#é–‹ç™ºè€…--author"><span>é–‹ç™ºè€… / <wbr/>Author</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@onjmin/oekaki</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
